{"version":3,"file":"Tabs.js","sourceRoot":"","sources":["Tabs.ts"],"names":[],"mappings":";;;;;;AAAA,OAAO,EAAE,UAAU,EAAkB,aAAa,EAAE,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,EAAa,MAAM,aAAa,CAAC;AAG/G,IAAa,GAAG,GAAhB,MAAa,GAAI,SAAQ,UAAU;IAa/B,MAAM,KAAK,MAAM;QACb,OAAO,CAAC,GAAG,CAAA;;;;;;;;SAQV,CAAC,CAAA;IACN,CAAC;IAED,MAAM;QACF,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE;YACV,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,KAAK,CAAA;SACvB;QACD,OAAO,IAAI,CAAA,eAAe,CAAA;IAC9B,CAAC;CACJ,CAAA;AA7BG;IADC,QAAQ,EAAE;+BACA;AAGX;IADC,QAAQ,EAAE;kCACG;AAGd;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;qCAC1B;AAGjB;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;sCACV;AAXT,GAAG;IADf,aAAa,CAAC,QAAQ,CAAC;GACX,GAAG,CA+Bf;SA/BY,GAAG;AAkChB,IAAa,IAAI,GAAjB,MAAa,IAAK,SAAQ,UAAU;IADpC;;QA0BqB,YAAO,GAAG;YACvB,IAAI,EAAE,EAAE;YACR,IAAI,EAAE,EAAE;YACR,KAAK,EAAE,EAAE;YACT,EAAE,EAAE,EAAE;YACN,IAAI,EAAE,EAAE;YACR,GAAG,EAAE,EAAE;SACV,CAAA;IAsLL,CAAC;IApNG,IAAI,QAAQ,CAAC,QAAgB;QACzB,KAAK,IAAI,GAAG,IAAI,IAAI,CAAC,IAAI,EAAE;YACvB,GAAG,CAAC,QAAQ,GAAG,GAAG,CAAC,EAAE,KAAK,QAAQ,CAAA;SACrC;QACD,IAAI,IAAI,CAAC,SAAS,IAAI,QAAQ,EAAE;YAC5B,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAA;YACzB,IAAI,CAAC,aAAa,CAAC,IAAI,WAAW,CAAC,QAAQ,EAAE,EAAE,MAAM,EAAE,QAAQ,EAAE,CAAC,CAAC,CAAA;YACnE,IAAI,CAAC,aAAa,EAAE,CAAA;SACvB;IACL,CAAC;IAED,IAAI,QAAQ;QACR,OAAO,IAAI,CAAC,SAAS,CAAA;IACzB,CAAC;IAED,IAAI,IAAI;QACJ,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC,CAAA;IACtD,CAAC;IAeD,MAAM,KAAK,MAAM;QACb,OAAO,CAAC,GAAG,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UAkGT,CAAC,CAAA;IACP,CAAC;IAED,MAAM;QACF,IAAI,SAAS,GAAqB,EAAE,CAAC;QACrC,KAAK,IAAI,GAAG,IAAI,IAAI,CAAC,IAAI,EAAE;YACvB,MAAM,KAAK,GAAG,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAA,6BAA6B,CAAC,CAAQ,EAAE,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,GAAG,CAAC,gGAAgG,CAAC,CAAC,CAAC,IAAI,CAAA,EAAE,CAAA;YACxM,SAAS,CAAC,IAAI,CAAC,IAAI,CAAA,8BAA8B,CAAC,CAAgB,EAAE,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,EAAE,GAAG,CAAC,WAAW,CAAC,CAAQ,EAAE,EAAE,CAAC,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,EAAE,eAAe,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,KAAK,GAAG,CAAC,KAAK,GAAG,KAAK,QAAQ,CAAC,CAAA;SACzN;QACD,OAAO,IAAI,CAAA,qBAAqB,SAAS,gDAAgD,CAAA;IAC7F,CAAC;IAED,MAAM,CAAC,EAAU;QACb,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC;IAC/C,CAAC;IAED,YAAY;QACR,IAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAA;IACvE,CAAC;IAED,KAAK,CAAC,CAAQ,EAAE,GAAQ;QACpB,CAAC,CAAC,eAAe,EAAE,CAAA;QACnB,IAAI,IAAI,CAAC,aAAa,CAAC,IAAI,WAAW,CAAC,aAAa,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC,CAAC,EAAE;YACvF,IAAI,GAAG,CAAC,QAAQ,EAAE;gBACd,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,kBAAkB,CAAC,CAAC,CAAC,GAAG,CAAC,kBAAkB,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAC,CAAC,GAAG,CAAC,sBAAsB,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;aACxI;YACD,GAAG,CAAC,MAAM,EAAE,CAAA;YACZ,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,IAAI,CAAC,aAAa,CAAC,IAAI,WAAW,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC;SACjE;IACL,CAAC;IAED,MAAM,CAAC,EAAU;QACb,OAAO,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;IAC7D,CAAC;IAEO,WAAW,CAAC,CAAQ;QACxB,KAAK,IAAI,GAAG,IAAI,IAAI,CAAC,IAAI,EAAE;YACvB,IAAI,GAAG,CAAC,QAAQ,IAAI,IAAI,CAAC,SAAS,IAAI,GAAG,CAAC,EAAE,EAAE;gBAC1C,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,EAAE,CAAA;gBACtB,OAAO,IAAI,CAAC;aACf;SACJ;QACD,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,OAAO,IAAI,CAAC;IAChB,CAAC;IAEO,OAAO,CAAC,KAAoB,EAAE,GAAQ;QAC1C,IAAI,KAAK,CAAC,MAAM;YAAE,OAAO;QACzB,IAAI,MAA0B,CAAA;QAC9B,IAAI,SAAS,GAAuB,KAAK,CAAC,aAA4B,CAAA;QACtE,QAAQ,KAAK,CAAC,OAAO,EAAE;YACnB,KAAK,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC;YACvB,KAAK,IAAI,CAAC,OAAO,CAAC,EAAE;gBAChB,MAAM,GAAG,GAAG,CAAC,sBAAqC,CAAA;gBAClD,SAAS,GAAG,SAAS,CAAC,CAAC,CAAC,SAAS,CAAC,sBAAqC,CAAC,CAAC,CAAC,IAAI,CAAA;gBAC9E,MAAM;YACV,KAAK,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC;YACxB,KAAK,IAAI,CAAC,OAAO,CAAC,IAAI;gBAClB,MAAM,GAAG,GAAG,CAAC,kBAAiC,CAAA;gBAC9C,SAAS,GAAG,SAAS,CAAC,CAAC,CAAC,SAAS,CAAC,kBAAiC,CAAC,CAAC,CAAC,IAAI,CAAA;gBAC1E,MAAM;YACV,KAAK,IAAI,CAAC,OAAO,CAAC,IAAI;gBAClB,MAAM,GAAG,GAAG,CAAC,aAAa,CAAC,CAAC,CAAe,GAAG,CAAC,aAAc,CAAC,iBAAgC,CAAC,CAAC,CAAC,IAAI,CAAA;gBACrG,SAAS,GAAG,SAAS,CAAC,CAAC,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC,CAAe,SAAS,CAAC,aAAc,CAAC,iBAAgC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAA;gBACvI,MAAM;YACV,KAAK,IAAI,CAAC,OAAO,CAAC,GAAG;gBACjB,MAAM,GAAG,GAAG,CAAC,aAAa,CAAC,CAAC,CAAe,GAAG,CAAC,aAAc,CAAC,gBAA+B,CAAC,CAAC,CAAC,IAAI,CAAA;gBACpG,SAAS,GAAG,SAAS,CAAC,CAAC,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC,CAAe,SAAS,CAAC,aAAc,CAAC,gBAA+B,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAA;gBACtI,MAAM;YACV;gBACI,OAAO;SACd;QACD,IAAI,MAAM,EAAE;YACR,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,EAAE,CAAA;YACzB,IAAI,SAAS,IAAI,IAAI,EAAE;gBACnB,SAAS,CAAC,KAAK,EAAE,CAAA;aACpB;YACD,KAAK,CAAC,cAAc,EAAE,CAAC;SAC1B;IACL,CAAC;CACJ,CAAA;AApNG;IADC,QAAQ,EAAE;oCAUV;AAWD;IADC,KAAK,CAAC,MAAM,CAAC;mCACgB;AAtBrB,IAAI;IADhB,aAAa,CAAC,SAAS,CAAC;GACZ,IAAI,CAsNhB;SAtNY,IAAI","sourcesContent":["import { LitElement, TemplateResult, customElement, property, html, query, css, CSSResult } from \"lit-element\";\n\n@customElement(\"fs-tab\")\nexport class Tab extends LitElement {\n    @property()\n    id: string;\n\n    @property()\n    label: string;\n\n    @property({ type: Boolean, reflect: true })\n    selected: boolean\n\n    @property({ type: Boolean })\n    closeable: boolean\n\n    static get styles() : CSSResult[] {\n        return [css`\n        :host {\n            display: none;\n            height: 100%;\n        }\n        :host([selected]) {\n            display: block;\n        }\n        `]\n    }\n\n    render() {\n        if (!this.id) {\n            this.id = this.label\n        }\n        return html`<slot></slot>`\n    }\n}\n\n@customElement(\"fs-tabs\")\nexport class Tabs extends LitElement {\n    @property()\n    set selected(selected: string) {\n        for (let tab of this.tabs) {\n            tab.selected = tab.id === selected\n        }\n        if (this._selected != selected) {\n            this._selected = selected\n            this.dispatchEvent(new CustomEvent(\"select\", { detail: selected }))\n            this.requestUpdate()\n        }\n    }\n\n    get selected() {\n        return this._selected\n    }\n\n    get tabs() : Tab[] {\n        return Array.from(this.querySelectorAll('fs-tab'))\n    }\n\n    @query(\"slot\")\n    private _slot: HTMLSlotElement\n    private _selected: string\n\n    private readonly KEYCODE = {\n        DOWN: 40,\n        LEFT: 37,\n        RIGHT: 39,\n        UP: 38,\n        HOME: 36,\n        END: 35,\n    }\n\n    static get styles() : CSSResult[] {\n        return [css`\n        .tabs {\n            display: flex;\n            flex-wrap: wrap;\n            box-shadow: inset 0 -1px 0 0 var(--lumo-contrast-10pct, #1a39601a);\n            position: relative;\n        }\n        .tab {\n            color: var(--lumo-tertiary-text-color, #1c304a80);\n            box-sizing: border-box;\n            padding: 0.5rem 0.75rem;\n            font-family: var(--lumo-font-family, -apple-system, BlinkMacSystemFont, \"Roboto\", \"Segoe UI\", Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\");\n            font-size: var(--lumo-font-size-m, 1rem);\n            line-height: var(--lumo-line-height-xs, 1.25);\n            font-weight: 500;\n            text-align: center;\n            opacity: 1;\n            color: var(--lumo-contrast-60pct, #1c2e459c);\n            transition: 0.15s color, 0.2s transform;\n            flex-shrink: 0;\n            display: flex;\n            align-items: center;\n            position: relative;\n            cursor: pointer;\n            transform-origin: 50% 100%;\n            outline: none;\n            -webkit-font-smoothing: antialiased;\n            -moz-osx-font-smoothing: grayscale;\n            overflow: hidden;\n            min-width: var(--lumo-size-m, 2.25rem);\n        }\n        .tab.selected {\n            color: var(--lumo-primary-text-color, #1676f3);\n            transition: 0.6s color;\n        }\n        .tab::before, .tab::after {\n            content: \"\";\n            position: absolute;\n            display: var(--_lumo-tab-marker-display, block);\n            bottom: 0;\n            left: 50%;\n            width: var(--lumo-size-s, 1.875rem);\n            height: 2px;\n            background-color: var(--lumo-contrast-60pct, #1c2e459c);\n            border-radius: var(--lumo-border-radius, 0.25em) var(--lumo-border-radius, 0.25em) 0 0;\n            transform: translateX(-50%) scale(0);\n            transform-origin: 50% 100%;\n            transition: 0.14s transform cubic-bezier(.12, .32, .54, 1);\n            will-change: transform;\n        }\n        .tab.selected::before, .tab.selected::after {\n            transform: translateX(-50%) scale(1);\n            transition-timing-function: cubic-bezier(.12, .32, .54, 1.5);\n            background-color: var(--lumo-primary-color, #1676f3);\n        }\n        .close {\n            display: inline-block;\n            border-radius: 50%;\n            transition: .1s all linear;\n            margin-left: 5px;\n            width: 1em;\n            height: 1em;\n            line-height: 1;\n        }\n        .close-x {\n            stroke: var(--lumo-tertiary-text-color, #1c304a80);\n            fill: transparent;\n            stroke-linecap: round;\n            stroke-width: 6;\n            transition: .1s all linear;\n        }\n        .close:hover {\n            background: var(--lumo-contrast-10pct, #1a39601a);\n        }\n        .close:hover .close-x {\n            stroke: var(--lumo-primary-text-color, #1676f3);\n        }\n        svg {\n            width: 0.6em;\n            height: 0.6em;\n            padding: 0.1em;\n        }\n        .content {\n            flex-grow: 1;\n            position: relative;\n        }\n        :host {\n            display: flex;\n            flex-direction: column;\n            width: 100%;\n            height: 100%;\n        }\n        ::slotted(fs-tab) {\n            position: absolute;\n            top: 0;\n            bottom: 0;\n            left: 0;\n            right: 0;\n        }`]\n    }\n\n    render() {\n        let templates: TemplateResult[] = [];\n        for (let tab of this.tabs) {\n            const close = tab.closeable ? html`<div class=\"close\" @click=${(e: Event) => this.close(e, tab)}><svg viewBox=\"0 0 40 40\"><path class=\"close-x\" d=\"M 5,5 L 35,35 M 35,5 L 5,35\" /></svg></div>` : html``\n            templates.push(html`<div tabIndex=\"0\" @keydown=${(e: KeyboardEvent) => this.keyDown(e, tab)} @click=${(e: Event) => this.selected = tab.id} class=\"tab ${tab.selected ? \"selected\" : \"\"}\">${tab.label}${close}</div>`)\n        }\n        return html`<div class=\"tabs\">${templates}</div><div class=\"content\"><slot></slot></div>`\n    }\n\n    getTab(id: string) : Tab | undefined {\n        return this.tabs.find(tab => tab.id == id);\n    }\n\n    firstUpdated() {\n        this._slot.addEventListener(\"slotchange\", e => this.slotChanged(e))\n    }\n\n    close(e: Event, tab: Tab) {\n        e.stopPropagation()\n        if (this.dispatchEvent(new CustomEvent(\"beforeclose\", { detail: tab, cancelable: true }))) {\n            if (tab.selected) {\n                this.selected = tab.nextElementSibling ? tab.nextElementSibling.id : tab.previousElementSibling ? tab.previousElementSibling.id : \"\";\n            }\n            tab.remove()\n            this.requestUpdate();\n            this.dispatchEvent(new CustomEvent(\"close\", { detail: tab }));\n        }\n    }\n\n    hasTab(id: string): boolean {\n        return this.tabs.filter(tab => tab.id === id).length > 0;\n    }\n\n    private slotChanged(e: Event) {\n        for (let tab of this.tabs) {\n            if (tab.selected && this._selected != tab.id) {\n                this.selected = tab.id\n                return true;\n            }\n        }\n        this.requestUpdate();\n        return true;\n    }\n\n    private keyDown(event: KeyboardEvent, tab: Tab) {\n        if (event.altKey) return;\n        let newTab: HTMLElement | null\n        let newTarget: HTMLElement | null = event.currentTarget as HTMLElement\n        switch (event.keyCode) {\n            case this.KEYCODE.LEFT:\n            case this.KEYCODE.UP:\n                newTab = tab.previousElementSibling as HTMLElement\n                newTarget = newTarget ? newTarget.previousElementSibling as HTMLElement : null\n                break;\n            case this.KEYCODE.RIGHT:\n            case this.KEYCODE.DOWN:\n                newTab = tab.nextElementSibling as HTMLElement\n                newTarget = newTarget ? newTarget.nextElementSibling as HTMLElement : null\n                break;\n            case this.KEYCODE.HOME:\n                newTab = tab.parentElement ? (<HTMLElement>tab.parentElement).firstElementChild as HTMLElement : null\n                newTarget = newTarget ? newTarget.parentElement ? (<HTMLElement>newTarget.parentElement).firstElementChild as HTMLElement : null : null\n                break;\n            case this.KEYCODE.END:\n                newTab = tab.parentElement ? (<HTMLElement>tab.parentElement).lastElementChild as HTMLElement : null\n                newTarget = newTarget ? newTarget.parentElement ? (<HTMLElement>newTarget.parentElement).lastElementChild as HTMLElement : null : null\n                break;\n            default:\n                return;\n        }\n        if (newTab) {\n            this.selected = newTab.id\n            if (newTarget != null) {\n                newTarget.focus()\n            }\n            event.preventDefault();\n        }\n    }\n}"]}