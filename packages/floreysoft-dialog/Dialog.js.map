{"version":3,"file":"Dialog.js","sourceRoot":"","sources":["Dialog.ts"],"names":[],"mappings":"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","sourcesContent":["import { customElement, LitElement, html, query, property } from \"lit-element\";\nimport { ifDefined } from \"lit-html/directives/if-defined\";\n\nexport class DialogButton {\n    label : string\n    id : string\n    theme? : string\n}\n\n@customElement(\"fs-dialog\")\nexport class Dialog extends LitElement {\n    @property({type: Array}) buttons: any[]\n    @property({type:Boolean, reflect: true}) open : boolean\n    @property() header: string\n    @property() theme: string\n    @property({type: Object}) context : any\n    @query(\".dialog\") _dialog: HTMLDialogElement\n    @query(\".dialogWrapper\") _dialogWrapper: HTMLDialogElement\n\n    private x: number\n    private y: number\n    private dragging: boolean\n\n    constructor() {\n        super()\n        this.theme = \"\"\n    }\n\n    render() {\n        if ( !this.buttons ) {\n            return html``\n        }\n        return html`\n        <style>\n        .backdrop, .dialogWrapper {\n            position: fixed;\n            top: 0;\n            right: 0;\n            bottom: 0;\n            left: 0;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            pointer-events: none;\n            z-index: 3;\n        }\n        .backdrop {\n            opacity: 0;\n            background: rgba(0, 0, 0, .5);\n            transition: all ease 0.12s;\n        }\n        .dialog {\n            position: relative;\n            display: flex;\n            flex-direction: column;\n            opacity: 0;\n            background-color: #fefefe;\n            max-height: 80%;\n            min-width: 350px;\n            box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);\n            z-index: 2;\n            transform: scale(0.8);\n            transition: 0.14s transform cubic-bezier(.12, .32, .54, 1);\n            will-change: transform;\n        }\n        .backdrop.open {\n            opacity: 1;\n            pointer-events: auto;\n        }\n        .dialog.open {\n            opacity: 1;\n            pointer-events: auto;\n            transform: scale(1);\n            transition-timing-function: cubic-bezier(.12, .32, .54, 1.5);\n        }\n        header {\n            background-color: var(--lumo-shade);\n            color: var(--lumo-primary-contrast-color);\n            font-family: var(--lumo-font-family);\n            font-size: var(--lumo-font-size-l);\n            padding: var(--lumo-space-m);\n            cursor: move;\n        }\n        header.success {\n            background-color: var(--lumo-success-color);\n        }\n        header.error {\n            background-color: var(--lumo-error-color);\n        }\n        section {\n            padding: var(--floreysoft-dialog-padding, var(--lumo-space-m));\n            background-color: var(--lumo-base-color);\n            overflow-y: auto;\n        }\n        footer {\n            background-color: var(--lumo-base-color);\n            padding: var(--lumo-space-xs) var(--lumo-space-m);\n            text-align: right;\n        }\n        vaadin-button {\n            margin-left: var(--lumo-space-s);\n        }\n        </style>\n        <div class=\"backdrop ${this.open ? \"open\" : \"\"}\"></div>\n        <div class=\"dialogWrapper\" @mouseup=${this.endDrag} @mousemove=${this.drag}>\n        <div class=\"dialog ${this.open ? \"open\" : \"\"}\">\n            <header class=\"${this.theme}\" @mousedown=${this.startDrag}>${this.header}</header>\n            <section><slot></slot></section>\n            <footer>${this.buttons.map(button => html`<vaadin-button theme=\"${ifDefined(typeof button == \"string\" ? \"primary\" : button.theme)}\" @click=${(e : Event) => this.optionSelected((typeof button == \"string\" ? button : button.id), this.context)}>${typeof button == \"string\" ? button : button.label}</vaadin-button>`)}</footer>\n        </div></div>`\n    }\n\n    optionSelected(option : string, context: any) {\n        if (this.dispatchEvent(new CustomEvent('selected', { detail : { option, context}, cancelable: true }))) {\n            this.open = false\n        }\n    }\n\n    protected startDrag(e : MouseEvent) {\n        let left = this._dialog.style.left ? parseInt(this._dialog.style.left,10) : 0\n        let top = this._dialog.style.top ? parseInt(this._dialog.style.top,10) : 0\n        this.x = e.screenX - left\n        this.y = e.screenY - top\n        this.dragging = true;\n        this._dialogWrapper.style.pointerEvents = \"auto\"\n    }\n\n    protected endDrag(e : MouseEvent) {\n        this.dragging = false;\n        this._dialogWrapper.style.pointerEvents = \"none\"\n    }\n\n    protected drag(e : MouseEvent) {\n        e.preventDefault\n        e.stopPropagation\n        if ( this.dragging ) {\n            this._dialog.style.left = (e.screenX - this.x)+\"px\"\n            this._dialog.style.top = (e.screenY - this.y)+\"px\"\n        }\n    }\n}"]}